# ![http://shapelogic.googlecode.com/svn/wiki/shapelogicsmalltransparent.png](http://shapelogic.googlecode.com/svn/wiki/shapelogicsmalltransparent.png) ShapeLogic Java #

Toolkit for declarative programming, image processing and computer vision.

The first real application for ShapeLogic is a [particle analyzer](http://www.shapelogic.org/particle.html). It will find and categorize particles on a relatively uniform background then make a report of geometric properties for each of the particles. The main application is for recognizing cells in medical image processing.

Join the ShapeLogic [mailing list](http://groups.google.com/group/shapelogic) for announcements, questions, bug reports, suggestions and feature requests.

The first ShapeLogic implementation is in Java. [ShapeLogic C++](http://www.shapelogic.org/cpp.html)  was started in September 2008.

Starting in ShapeLogic 1.5 the rules for OCR and particle categorization, can either be handwritten or generated by [machine learning](http://www.shapelogic.org/machine-learning.html). The first machine learning technique in ShapeLogic is a multi-layer feed forward neural network that is trained externally but run internally.

## Main ideas and motivation for ShapeLogic ##
ShapeLogic is a library for
  * [Declarative programming](http://www.shapelogic.org/general-declarative.html) and lazy computations in Java
  * Image processing and computer vision
  * [Particle analyzer](http://www.shapelogic.org/particle.html) for medical image processing
While ShapeLogic's declarative programming system was initially developed
for image processing and computer vision, it is widely applicable.
It is currently difficult to combine declarative programming and image processing.
ShapeLogic is intended as basic plumbing software that turns a logic engine
into a simple plugin component to ease entry into vision and image
analysis. ShapeLogic also fills gaps missing from current Java image
processing libraries, and uses a commercially friendly license.

ShapeLogic has an automatic color [particle counter and analyzer](http://www.shapelogic.org/particle.html) and a [letter matching example](http://www.shapelogic.org/letter-match.html).

## Features ##
  * [Declarative](http://www.shapelogic.org/declarative-logic.html) goal driven logic engine with lazy computations
  * Specialized for the domain of image processing and computer vision
  * The user can store [rules](http://www.shapelogic.org/logic-language.html) in either a flat file or database, decreasing user reliance on Java programming
  * User rules is written in Java or Java 6 Scripting using: Groovy, JavaScript, JRuby
  * Implementation of [2D geometry primitives](2DgeometryPrimitives.md), [vectorization](vectorization.md) and [segmentation](segmentation.md)
  * Annotations of point as: Different type of junctions, end point, hard or soft point
  * Annotations of lines as: Straight, curved, concave, inflection
  * It is free (as in free speech and free beer)
  * Commercially friendly MIT open source license
  * Programmed in Java
  * Can be used as a plugin for I [ImageJ](http://rsb.info.nih.gov/ij/), the leading Java open source project used in medical image processing

## Particle analyzer ##

ShapeLogic 1.2 contains the first version of a [color particle analyzer](http://www.shapelogic.org/particle.html).

Here is an example particle image embryos.jpg

![http://shapelogic.googlecode.com/svn/wiki/images/particles/embryos.jpg](http://shapelogic.googlecode.com/svn/wiki/images/particles/embryos.jpg)

To run it from ImageJ select "Color Particle Analyzer" in the ShapeLogic menu:

![http://shapelogic.googlecode.com/svn/wiki/images/particles/shapelogicmenu.png](http://shapelogic.googlecode.com/svn/wiki/images/particles/shapelogicmenu.png)

First a particle count dialog is displayed:

![http://shapelogic.googlecode.com/svn/wiki/images/particles/particleCountDialog.png](http://shapelogic.googlecode.com/svn/wiki/images/particles/particleCountDialog.png)

Here is the result of running the non-customized particle analyzer on it. This is written to a result table that can be exported to Excel:

![http://shapelogic.googlecode.com/svn/wiki/images/particles/particleAnalyzerResult.png](http://shapelogic.googlecode.com/svn/wiki/images/particles/particleAnalyzerResult.png)

The categories for the particles are only examples, it is easy to setup different rules for categorizing particles.

In ShapeLogic 1.3 there will be custom rules to [categorize specific cells](http://www.shapelogic.org/cell.html) and it will be tested further.

ShapeLogic 1.2 also contains the second version of a color particle counter. It also prints a smaller report of the particle's properties.

![http://shapelogic.googlecode.com/svn/wiki/images/particles/particleCounterResult.png](http://shapelogic.googlecode.com/svn/wiki/images/particles/particleCounterResult.png)

The test cases are taken from the sample images from ImageJ

![http://shapelogic.googlecode.com/svn/wiki/images/particles/blobs.gif](http://shapelogic.googlecode.com/svn/wiki/images/particles/blobs.gif)
blobs.gif
![http://shapelogic.googlecode.com/svn/wiki/images/particles/Cell_Colony.jpg](http://shapelogic.googlecode.com/svn/wiki/images/particles/Cell_Colony.jpg)
Cell\_Colony.jpg

## Getting Started links ##

[ShapeLogic project home page](http://www.shapelogic.org) is the main source of information.

Code is hosted here on Google Code hosting page where you can download both source files and binary distributions.

[Getting Started on project site](http://www.shapelogic.org/getting-started.html)


On using ShapeLogic as a [general declarative programming framework](http://www.shapelogic.org/general-declarative.html).

[Letter match example applications](http://www.shapelogic.org/letter-match.html) showing how to use the ShapeLogic framework.

Please join the [ShapeLogic mailing list](http://groups.google.com/group/shapelogic) for announcements, questions, bug reports, suggestions and feature requests.

Here are the [Release notes](http://www.shapelogic.org/release-notes.html).

How to join the [ShapeLogic Team](http://www.shapelogic.org/team.html).

## Requirements ##
For running as a library for functional and declarative programming there are no requirements.

For running as a ImageJ plugin ShapeLogic uses the following libraries:
  * [ImageJ](http://rsb.info.nih.gov/ij/) ShapeLogic is build on top of the popular ImageJ framework, but could work stand alone without too much work
  * [Commons math](http://commons.apache.org/math/): Math library used for geometry processing
  * [Antlr](http://www.antlr.org/): For parsing build in filter language

You can run all current image processing algorithms [outside ImageJ](http://www.shapelogic.org/image-formats.html), using just a BufferedImage. If you want to embed ShapeLogic in your application.

### Optional Requirements ###
These are used in unit tests, builds or old versions of image processing functionalities:
  * [Maven 2](http://maven.apache.org/): Build system
  * [Apache commons](http://commons.apache.org/): [JEXL](http://commons.apache.org/jexl/), [beanutils](http://commons.apache.org/beanutils/): For first version logic rules interpreter
  * Groovy, JavaScript, JRuby: For second version logic rules interpreter
  * [Hibernate](http://www.hibernate.org/) or JDBC: For database access
  * [Google Guice](http://code.google.com/p/google-guice/): Lightweight IoC framework
  * [HSQLDB](http://hsqldb.org/) or [H2](http://www.h2database.com/): Embedded databases

## Development Status: Beta ##
  * ShapeLogic is in Beta, as of version 1.0.
  * The API is still under development.
  * Contains a framework for declarative and functional programming.
  * ShapeLogic currently consists of 34,000 lines of Java code including 540 unit tests.
  * ShapeLogic has project website http://www.shapelogic.org.

## News ##

### 2009/05/14 ShapeLogic 1.6 improve neural network and rules ###
  * Extend Multi-layer feed forward neural network to work with letter matcher
  * Load neural network from [categorizer setup file](http://www.shapelogic.org/categorizer-setup.html)
  * Load categorizer rules from categorizer setup file
  * Load columns for result table from categorizer setup file

### 2009/04/09 ShapeLogic 1.5 machine learning released ###
  * Start combining [machine learning](http://www.shapelogic.org/machine-learning.html) and declarative programming
  * Multi-layer feed forward neural network with external learning, can be used with color particle analyzer
  * Make it easier to select which particle properties to print out

### 2008/11/28 ShapeLogic 1.4 released ###
  * Added mask option to [particle analyzer](http://www.shapelogic.org/particle.html)
  * Write out information about points and lines in vectorizer working on skeletonized image
  * In Color Particle Analyzer write out average color in R, G and B channels, to handle particles in co-localization images better
  * Improve the color replacer plugin, to take separate RGB values as input
  * Change annotation of points and lines to be on individual images instead of global
  * Improved stability of [particle analyzer](http://www.shapelogic.org/particle.html)
  * Improved stability of lazy stream library: fixed bugs and added unit tests
  * Built for JDK 1.5 / Java 5 so it should work on the Mac without updates

### 2008/09/03 Start of experimental port from Java to C++ ###

An [experimental port of ShapeLogic to C++](http://www.shapelogic.org/cpp.html) has begun.
The algorithms in ShapeLogic are not using anything too languages specific so they should be portable to similar languages say C++ and C#. The idea with ShapeLogic is that it should be a declarative framework for vision and you should be able to get work done by making rules instead of regular procedural or object oriented programming.
For example should be able to make a list of rules for categorizing the shape of a particle in a particle analyzer. You put them in a database or a flat file and the same rules should work for C++ and Java version of ShapeLogic.

## Future plans for ShapeLogic ##

For more up to date information on ongoing development work look at these
  * Blog [Declarative Computer Vision](http://samibadawi.blogspot.com)
  * [Roadmap](http://www.shapelogic.org/roadmap.html)

### ShapeLogic 1.6 Java improve neural network ###
  * Extend Multi-layer feed forward neural network to work with letter matcher
  * Add functionality to load neural network from file

### Low hanging fruits for ShapeLogic Java ###
  * Expand OCR to cover lower case letters using neural network matching
  * [Component framework](http://www.shapelogic.org/component.html) for hybrid and complex vision problems
  * Make custom rules to recognize specific [cells](http://www.shapelogic.org/cell.html). In v 1.3 the user has to make rules themselves. Mainly pending finding a relevant test case.
  * HSV mode for the particle analyzer

## Examples applications ##
  * Automatic color and gray scale [particle counter and analyzer](http://www.shapelogic.org/particle.html), first medical image processing example
  * [Letter matching example](http://www.shapelogic.org/letter-match.html). Very rudimentary OCR.
  * [Mathematical problems](http://www.shapelogic.org/project-euler.html) from [Project Euler](http://projecteuler.net). This is a list of 192 mathematical problems that can be solved by computers. They vary in complexity from simple to hard. The goal is to test ShapeLogic's new declarative and functional constructs on real problems and make sure they are terse and intuitive.

Site last modified 2009-05-14